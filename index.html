<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="favicon-32x32.png" type="image/x-icon" />
  <title>Microinvest Credit</title>

  <style>
    :root {
      --mainColor: rgb(0, 129, 55);
      /* MicroCreditInvest's green */
      --backgroundColor: #d3d3d3;
      /* lightgray */
      --textColor: #1f1f1f;
      /* darkgray */
      --tableRowColor: rgba(0,
          128,
          0,
          0.1);
      /* Green с минимальной opacity*/
      --whiteColor: #ffffff;

      /* fonts */

      --mainFont: "Trebuchet MS", "Lucida Sans Unicode", "Lucida Grande",
        "Lucida Sans", Arial, sans-serif;
    }

    /* general sets */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: var(--mainFont);
    }

    body {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      width: 100%;
      background-color: var(--backgroundColor);
      font-size: 16px;
      color: var(--textColor);
    }


    /*  credit container sets */
    #credit-container {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      position: relative;
      width: 90%;
      max-width: 576px;
      background-color: white;
      margin: 75px auto;
      border-radius: 10px;
    }

    #credit-container img {
      width: 100%;
      height: 50px;
      margin: 40px auto 10px;

    }

    /* table sets */
    table {
      margin: 20px;
      border-collapse: collapse;
      max-width: 90%;
      table-layout: fixed;
    }

    th,
    td {
      width: 33.33%;
      padding: 10px;
      text-align: center;
    }

    th {
      background-color: var(--mainColor);
      color: white;
      font-weight: bold;
      border: 1px solid white;
    }

    .td-left-align {
      text-align: left;
      border-radius: 5px 0px 0px 5px;
    }

    .td-right-align {
      text-align: right;
      border-radius: 0px 5px 5px 0px;
    }

    tbody tr:nth-child(even) {
      background-color: var(--tableRowColor);
    }

    tbody tr {
      cursor: pointer;
      transition: color 0.3s;
    }

    tbody tr:hover {
      color: var(--mainColor);
    }

    td {
      border-left: none;
      border-right: none;
    }

    td input[type="radio"] {
      margin-right: 5px;
    }

    /* personal info section */

    #personal-info-section {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      row-gap: 1rem;
    }

    #personal-info-section input {
      width: 90%;
      min-width: 250px;
      padding: 0.5rem;

      border: 1px solid #ccc;
      border-radius: 5px;

    }

    .input-container {
      display: flex;
      flex-direction: column;
    }

    .input-container label {
      margin-bottom: 5px;
    }

    /* button sets */

    #personal-info-section button {
      width: 150px;
      color: whitesmoke;
      background-color: var(--mainColor);
      padding: 10px 0px;
      margin: 15px auto;
      text-align: center;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: transform 0.1s ease;

    }

    #personal-info-section button:active {
      transform: scale(0.95);
    }

    /* close cross/button */

    .closeButton {
      position: absolute;
      top: 10px;
      right: 20px;
      font-size: 1.5rem;
      color: var(--textColor);
      background: none;
      border: none;
      cursor: pointer;
    }

    /* thanks-message*/

    #thanks-message {
      display: none;
      text-align: center;
      padding: 20px 20px 30px;
      line-height: 1.4;
      font-size: 0.8rem;
    }

        /* footer sets */
    footer {
      width: 75%;
      margin: 15px auto 25px;
    }

    .text-footer {
      text-align: center;
      line-height: 1.4;
      font-size: 0.8rem;
    }
  </style>
</head>

<body>
  <div id="credit-container">
    <!-- close cross/button -->
    <span class="closeButton">&times;</span>
    <!-- logo -->
    <img src="mci-logo.svg" alt="The Microinvest's Logo" loading="auto"></img>

    <!-- table section / terms, %, monthly payments -->
    <table>
      <thead>
        <tr>
          <th class="td-left-align">Termen</th>
          <th>Lunar</th>
          <th class="td-right-align">Total</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="td-left-align">
            <input type="radio" name="term" value="3" checked />3 luni
          </td>
          <td class="monthly-payment">lei</td>
          <td class="td-right-align total-payment">lei</td>
        </tr>
        <tr>
          <td class="td-left-align">
            <input type="radio" name="term" value="6" />6 luni
          </td>
          <td class="monthly-payment">lei</td>
          <td class="td-right-align total-payment">lei</td>
        </tr>
        <tr>
          <td class="td-left-align">
            <input type="radio" name="term" value="9" />9 luni
          </td>
          <td class="monthly-payment">lei</td>
          <td class="td-right-align total-payment">lei</td>
        </tr>
        <tr>
          <td class="td-left-align">
            <input type="radio" name="term" value="12" />12 luni
          </td>
          <td class="monthly-payment">lei</td>
          <td class="td-right-align total-payment">lei</td>
        </tr>
        <tr>
          <td class="td-left-align">
            <input type="radio" name="term" value="18" />18 luni
          </td>
          <td class="monthly-payment">lei</td>
          <td class="td-right-align total-payment">lei</td>
        </tr>
        <tr>
          <td class="td-left-align">
            <input type="radio" name="term" value="24" />24 luni
          </td>
          <td class="monthly-payment">lei</td>
          <td class="td-right-align total-payment">lei</td>
        </tr>
      </tbody>
    </table>

    <!--  personal info section -->
    <form id="personal-info-section">

      <div class="input-container">
        <label for="first-name">Prenume</label>
        <input type="text" id="first-name" name="first-name" required title="Introduceți doar litere" />
      </div>
      <div class="input-container">
        <label for="last-name">Nume</label>
        <input type="text" id="last-name" name="last-name" required title="Introduceți doar litere" />
      </div>
      <div class="input-container">
        <label for="phone">Număr de telefon mobil</label>
        <input type="tel" id="phone" name="phone" required title="Introduceți doar cifre" />
      </div>

      <!-- button Trimite  -->

      <button type="submit">Trimite</button>

    </form>
    <!-- thank message -->
    <aside>
      <div id="thanks-message">
        <p>Vă mulțumim că ați utilizat serviciile noastre!</p>
        <p>Cererea dumneavoastră a fost trimisă cu succes.</p>
        <p>Vă vom contacta în cel mai scurt timp.</p>
      </div>
    </aside>

    </main>
    <!-- footer -->
    <footer>
      <p class="text-footer">
        Prin trimiterea cererii, sunteți de acord cu termenii site-ului și cu politica de confidențialitate
      </p>
    </footer>
  </div>

  <!-- <script src="script.js" defer></script> -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const percentages = {
        3: 1.05,
        6: 1.09,
        9: 1.11,
        12: 1.17,
        18: 1.25,
        24: 1.34,
      };

      let itemPrice;
      do {
        itemPrice = prompt("Введите стоимость товара (от 1000 до 100 000 леев):", "");

        if (itemPrice === null) {
          console.log("Пользователь отменил ввод.");
          return;
        }

        itemPrice = parseFloat(itemPrice);
      } while (isNaN(itemPrice) || itemPrice < 1000 || itemPrice > 100000);

      // Вывод в консоль введенной покупателем стоимости товара  
      // console.log(`Стоимость товара: ${itemPrice} lei`);

      // Начало основного блока для расчета суммы кредита
      const rows = document.querySelectorAll("tbody tr");

      rows.forEach((row) => {
        const radioButton = row.querySelector("input[type='radio']");
        const term = parseInt(radioButton.value);

        const totalPayment = Math.round(itemPrice * percentages[term]);
        const monthlyPayment = Math.round(totalPayment / term);

        row.querySelector(".total-payment").textContent = `${totalPayment} lei`;
        row.querySelector(".monthly-payment").textContent = `${monthlyPayment} lei`;

        const percentage = Math.round((percentages[term] - 1) * 100);

        // Вывод в консоль итоговых рассчетов для каждого срока кредита 
        // console.log(`Срок: ${term} месяцев`);
        // console.log(`Процент: ${percentage}%`);
        // console.log(`Итоговая сумма: ${totalPayment} леев`);
        // console.log(`Ежемесячный платеж: ${monthlyPayment} леев`);

        row.addEventListener("click", () => {
          radioButton.checked = true;
        });
      });

      const form = document.getElementById("personal-info-section");

      form.addEventListener("submit", (event) => {
        event.preventDefault();

        const firstName = document.getElementById("first-name").value;
        const lastName = document.getElementById("last-name").value;
        const phone = document.getElementById("phone").value;
        const selectedTerm = document.querySelector('input[name="term"]:checked').value;

        const namePattern = /^[A-Za-zĂăÂâÎîŞşŢţ]+$/;
        if (firstName.length < 2 || !namePattern.test(firstName)) {
          alert("Prenumele trebuie să conțină cel puțin două litere și să fie scris doar în litere.");
          return;
        }
        if (lastName.length < 2 || !namePattern.test(lastName)) {
          alert("Numele trebuie să conțină cel puțin două litere și să fie scris doar în litere.");
          return;
        }

        const phonePattern = /^0\d{8}$/;
        if (!phonePattern.test(phone)) {
          alert("Numărul de telefon trebuie să înceapă cu 0 și să conțină exact 9 cifre.");
          return;
        }

        // Если все проверки пройдены, скрываем форму, таблицу и footer и показываем благодарственное сообщение
        form.style.display = "none";

        const tableContainer = document.querySelector("table");
        if (tableContainer) tableContainer.style.display = "none";

        const footerContainer = document.querySelector("footer");
        if (footerContainer) footerContainer.style.display = "none";

        const thanksMessage = document.getElementById("thanks-message");
        thanksMessage.style.display = "block";

        // Рассчитываем общую сумму и ежемесячный платеж
        const totalPayment = Math.round(itemPrice * percentages[selectedTerm]);
        const monthlyPayment = Math.round(totalPayment / selectedTerm);

        // Вывод итоговой информации  в консоль
        console.log(`Имя покупателя: ${firstName}`);
        console.log(`Фамилия покупателя: ${lastName}`);
        console.log(`Телефон: ${phone}`);
        console.log(`Стоимость товара: ${itemPrice} леев`);
        console.log(`Выбранный срок кредита: ${selectedTerm} месяцев`);
        console.log(`Ежемесячный платеж: ${monthlyPayment} леев`);
        console.log(`Итоговая сумма: ${totalPayment} леев`);

        // Закрытие окна (крест в правом верхнем углу)
        const closeButton = document.querySelector(".closeButton");
        const creditContainer = document.getElementById("credit-container");

        closeButton.addEventListener("click", () => {
          creditContainer.style.display = "none";
        });

      });
    });
  </script>



</body>

</html>
